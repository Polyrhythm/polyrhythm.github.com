<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content="width=device-width, initial-scale=1.0, user-scalable=yes" name="viewport"><title>misaki document - Clojurescript</title><link href="/favicon.ico" rel="shortcut icon"><link href="/atom.xml" rel="alternate" title="Clojurescript" type="application/atom-xml"><link href="/misaki/css/prettify.css" rel="stylesheet" type="text/css"><link href="http://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet" type="text/css"><link href="/misaki/css/main.css" rel="stylesheet" type="text/css"><link href="/misaki/css/extra.css" rel="stylesheet" type="text/css"><link href="/misaki/css/smartphone.css" media="only screen and (max-device-width:480px)" rel="stylesheet" type="text/css"></head><body><a class="github_ribbon" href="https://github.com/liquidz/misaki"><img alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" style="position: absolute; top: 0; right: 0; border: 0;"></a><div class="container"><article><div class="page-header"><h1 id="G__4264"><a href="/misaki/">Clojurescript</a><a class="dagger" href="#G__4264">&dagger;</a></h1><div class="tag"><ul></ul></div><p class="date"></p></div><div class="post"><h2 id="G__4259"><span>C</span>onfig setting<a class="dagger" href="#G__4259">&dagger;</a></h2><p class="paragraph">Delete cljs option comment in <code class="prettyprint">_config.clj</code>, and add <code class="prettyprint">cljs</code> compiler.</p><pre class="prettyprint lang-clj">{
 ;; clojurescript compile options
 ;; src-dir base is `:template-dir`
 ;; output-dir base is `:public-dir`
 :cljs {:src-dir       &quot;cljs&quot;
        :output-to     &quot;js/main.js&quot;
        :optimizations :whitespace
        :pretty-print  true}

 ;; add cljs compiler
 :compiler [&quot;default&quot; &quot;cljs&quot;]
 }</pre><p class="paragraph">Following is default cljs options, so you can specify only difference.</p><pre class="prettyprint lang-clj">{
 :src-dir       &quot;cljs&quot;
 :output-to     &quot;js/main.js&quot;
 :optimizations :whitespace
 :pretty-print  true
 }</pre><h2 id="G__4260"><span>E</span>dit clojurescript source.<a class="dagger" href="#G__4260">&dagger;</a></h2><p class="paragraph">Open "template-dir/cljs/hello.cljs".
   Clojurescript source filepath is defined by <code class="prettyprint">:cljs {:src-dir}</code> in _config.clj
   </p><pre class="prettyprint lang-clj">(ns hello)

(defn ^:export myalert [msg]
  (.alert js/window (str &quot;Hello, &quot; msg)))</pre><p class="paragraph">Edit html file.</p><pre class="prettyprint">&lt;button onclick=&quot;hello.myalert('clojurescript world!!');&quot;&gt;
Call clojurescript function!
&lt;/button&gt;</pre><p class="paragraph">Demo button.</p><button onclick="hello.myalert('clojurescript world!!');">Call clojurescript function!</button><h3 id="G__4261"><span>F</span>ailed to compile?<a class="dagger" href="#G__4261">&dagger;</a></h3><p class="paragraph">if you failed to compile clojurescript, try followings</p><h4 id="G__4262"><span>j</span>ava.lang.AssertionError<a class="dagger" href="#G__4262">&dagger;</a></h4><pre class="prettyprint">cd MISAKI_HOME
rm -rf classes/cljs</pre><h4 id="G__4263"><span>A</span>nother errors<a class="dagger" href="#G__4263">&dagger;</a></h4><pre class="prettyprint">cd CLJS_OUTPUT_DIR
rm hello.js
rm -rf cljs</pre><script src="/misaki/../js/hello.js" type="text/javascript"></script><p class="paragraph pager"><a href="/misaki/toc/04-highlight-setting.html">&laquo; Highlight Setting</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="/misaki/">Top Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="/misaki/toc/06-switch-compiler.html">Switch Compiler&nbsp;&raquo;</a></p></div></article><footer class="footer"><p><a href="http://twitter.com/uochan">@uochan</a>&nbsp; 2013</p><p><a href="https://github.com/liquidz/misaki"><img alt="misaki banner" src="/misaki/img/misaki_banner.svg"></a></p></footer></div><script src="/misaki/js/prettify.js" type="text/javascript"></script><script src="/misaki/js/lang-clj.js" type="text/javascript"></script><script src="/misaki/js/main.js" type="text/javascript"></script></body></html>